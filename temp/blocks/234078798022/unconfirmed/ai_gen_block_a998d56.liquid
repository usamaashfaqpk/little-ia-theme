{% doc %}
  @prompt
    Create a flexible container block with comprehensive grid layout settings that can hold other blocks inside it. The container should include settings for: grid columns (responsive for mobile, tablet, desktop), gap/spacing between items, alignment options (horizontal and vertical), and padding controls. The block should appear in the theme editor's block picker and allow merchants to add any other blocks as children inside this grid container. Include visual controls for grid template columns, rows, and responsive breakpoints., this should be like group but with grid settings, like in group we can add other blocks inside It should allow that as well. Moreover should be no default color or text or something like inside it
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-grid-container-{{ ai_gen_id }} {
    display: block;
    width: 100%;
    box-sizing: border-box;
  }

  .ai-grid-container__wrapper-{{ ai_gen_id }} {
    display: grid;
    width: 100%;
    gap: {{ block.settings.gap_mobile }}px;
    padding: {{ block.settings.padding_top_mobile }}px {{ block.settings.padding_horizontal_mobile }}px {{ block.settings.padding_bottom_mobile }}px;
    grid-template-columns: repeat({{ block.settings.columns_mobile }}, 1fr);
    justify-items: {{ block.settings.horizontal_alignment }};
    align-items: {{ block.settings.vertical_alignment }};
  }

  {% if block.settings.min_item_width > 0 %}
    .ai-grid-container__wrapper-{{ ai_gen_id }} {
      grid-template-columns: repeat(auto-fit, minmax({{ block.settings.min_item_width }}px, 1fr));
    }
  {% endif %}

  @media screen and (min-width: 750px) {
    .ai-grid-container__wrapper-{{ ai_gen_id }} {
      gap: {{ block.settings.gap_tablet }}px;
      padding: {{ block.settings.padding_top_tablet }}px {{ block.settings.padding_horizontal_tablet }}px {{ block.settings.padding_bottom_tablet }}px;
      grid-template-columns: repeat({{ block.settings.columns_tablet }}, 1fr);
    }

    {% if block.settings.min_item_width > 0 %}
      .ai-grid-container__wrapper-{{ ai_gen_id }} {
        grid-template-columns: repeat(auto-fit, minmax({{ block.settings.min_item_width }}px, 1fr));
      }
    {% endif %}
  }

  @media screen and (min-width: 990px) {
    .ai-grid-container__wrapper-{{ ai_gen_id }} {
      gap: {{ block.settings.gap_desktop }}px;
      padding: {{ block.settings.padding_top_desktop }}px {{ block.settings.padding_horizontal_desktop }}px {{ block.settings.padding_bottom_desktop }}px;
      grid-template-columns: repeat({{ block.settings.columns_desktop }}, 1fr);
    }

    {% if block.settings.min_item_width > 0 %}
      .ai-grid-container__wrapper-{{ ai_gen_id }} {
        grid-template-columns: repeat(auto-fit, minmax({{ block.settings.min_item_width }}px, 1fr));
      }
    {% endif %}
  }

  .ai-grid-container__item-{{ ai_gen_id }} {
    width: 100%;
  }
{% endstyle %}

<grid-container-{{ ai_gen_id }}
  class="ai-grid-container-{{ ai_gen_id }}"
  {{ block.shopify_attributes }}
>
  <div class="ai-grid-container__wrapper-{{ ai_gen_id }}">
    {% for child_block in block.blocks %}
      <div class="ai-grid-container__item-{{ ai_gen_id }}">
        {% render block: child_block %}
      </div>
    {% endfor %}
  </div>
</grid-container-{{ ai_gen_id }}>

<script>
  (function() {
    class GridContainer{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }
    }

    customElements.define('grid-container-{{ ai_gen_id }}', GridContainer{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Grid container",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Grid columns"
    },
    {
      "type": "range",
      "id": "columns_mobile",
      "label": "Mobile columns",
      "min": 1,
      "max": 3,
      "step": 1,
      "default": 1
    },
    {
      "type": "range",
      "id": "columns_tablet",
      "label": "Tablet columns",
      "min": 1,
      "max": 6,
      "step": 1,
      "default": 2
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "label": "Desktop columns",
      "min": 1,
      "max": 12,
      "step": 1,
      "default": 3
    },
    {
      "type": "range",
      "id": "min_item_width",
      "label": "Minimum item width",
      "min": 0,
      "max": 500,
      "step": 10,
      "unit": "px",
      "default": 0,
      "info": "Set to 0 to use fixed columns. When set, items will automatically wrap based on this minimum width."
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "gap_mobile",
      "label": "Mobile gap",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 16
    },
    {
      "type": "range",
      "id": "gap_tablet",
      "label": "Tablet gap",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 20
    },
    {
      "type": "range",
      "id": "gap_desktop",
      "label": "Desktop gap",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 24
    },
    {
      "type": "header",
      "content": "Alignment"
    },
    {
      "type": "select",
      "id": "horizontal_alignment",
      "label": "Horizontal alignment",
      "options": [
        {
          "value": "start",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "end",
          "label": "Right"
        },
        {
          "value": "stretch",
          "label": "Stretch"
        }
      ],
      "default": "stretch"
    },
    {
      "type": "select",
      "id": "vertical_alignment",
      "label": "Vertical alignment",
      "options": [
        {
          "value": "start",
          "label": "Top"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "end",
          "label": "Bottom"
        },
        {
          "value": "stretch",
          "label": "Stretch"
        }
      ],
      "default": "start"
    },
    {
      "type": "header",
      "content": "Padding - Mobile"
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "label": "Top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "label": "Bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_horizontal_mobile",
      "label": "Horizontal",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "header",
      "content": "Padding - Tablet"
    },
    {
      "type": "range",
      "id": "padding_top_tablet",
      "label": "Top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom_tablet",
      "label": "Bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_horizontal_tablet",
      "label": "Horizontal",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "header",
      "content": "Padding - Desktop"
    },
    {
      "type": "range",
      "id": "padding_top_desktop",
      "label": "Top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom_desktop",
      "label": "Bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_horizontal_desktop",
      "label": "Horizontal",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    }
  ],
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "image"
    },
    {
      "type": "text"
    },
    {
      "type": "heading"
    },
    {
      "type": "button"
    },
    {
      "type": "video"
    }
  ],
  "presets": [
    {
      "name": "Grid container"
    }
  ]
}
{% endschema %}