{% doc %}
  @prompt
    Create a container block similar to a group block that uses CSS Grid instead of flexbox. The block should allow other blocks to be nested inside it and include these grid-specific settings: grid-template-columns (with options for auto, repeat, custom values), grid-template-rows, grid gap (row and column gaps separately), justify-items (start, end, center, stretch), align-items (start, end, center, stretch), grid-auto-flow (row, column, dense), and responsive grid columns for mobile, tablet, and desktop. The block should appear in the theme editor block picker and function as a parent container for child blocks with full grid layout control.
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-grid-container-{{ ai_gen_id }} {
    display: grid;
    width: 100%;
    
    {% if block.settings.grid_template_columns == 'auto' %}
      grid-template-columns: auto;
    {% elsif block.settings.grid_template_columns == 'repeat-2' %}
      grid-template-columns: repeat(2, 1fr);
    {% elsif block.settings.grid_template_columns == 'repeat-3' %}
      grid-template-columns: repeat(3, 1fr);
    {% elsif block.settings.grid_template_columns == 'repeat-4' %}
      grid-template-columns: repeat(4, 1fr);
    {% elsif block.settings.grid_template_columns == 'repeat-5' %}
      grid-template-columns: repeat(5, 1fr);
    {% elsif block.settings.grid_template_columns == 'repeat-6' %}
      grid-template-columns: repeat(6, 1fr);
    {% elsif block.settings.grid_template_columns == 'custom' %}
      grid-template-columns: {{ block.settings.custom_columns }};
    {% endif %}
    
    {% if block.settings.grid_template_rows == 'auto' %}
      grid-template-rows: auto;
    {% elsif block.settings.grid_template_rows == 'repeat-2' %}
      grid-template-rows: repeat(2, 1fr);
    {% elsif block.settings.grid_template_rows == 'repeat-3' %}
      grid-template-rows: repeat(3, 1fr);
    {% elsif block.settings.grid_template_rows == 'repeat-4' %}
      grid-template-rows: repeat(4, 1fr);
    {% elsif block.settings.grid_template_rows == 'custom' %}
      grid-template-rows: {{ block.settings.custom_rows }};
    {% endif %}
    
    column-gap: {{ block.settings.column_gap }}px;
    row-gap: {{ block.settings.row_gap }}px;
    justify-items: {{ block.settings.justify_items }};
    align-items: {{ block.settings.align_items }};
    grid-auto-flow: {{ block.settings.grid_auto_flow }};
    
    {% if block.settings.background_color != blank and block.settings.background_color != 'rgba(0,0,0,0)' %}
      background-color: {{ block.settings.background_color }};
    {% endif %}
    
    padding: {{ block.settings.padding_top }}px {{ block.settings.padding_right }}px {{ block.settings.padding_bottom }}px {{ block.settings.padding_left }}px;
  }

  @media screen and (max-width: 989px) {
    .ai-grid-container-{{ ai_gen_id }} {
      {% if block.settings.tablet_columns == 'auto' %}
        grid-template-columns: auto;
      {% elsif block.settings.tablet_columns == 'repeat-1' %}
        grid-template-columns: repeat(1, 1fr);
      {% elsif block.settings.tablet_columns == 'repeat-2' %}
        grid-template-columns: repeat(2, 1fr);
      {% elsif block.settings.tablet_columns == 'repeat-3' %}
        grid-template-columns: repeat(3, 1fr);
      {% elsif block.settings.tablet_columns == 'repeat-4' %}
        grid-template-columns: repeat(4, 1fr);
      {% endif %}
    }
  }

  @media screen and (max-width: 749px) {
    .ai-grid-container-{{ ai_gen_id }} {
      {% if block.settings.mobile_columns == 'auto' %}
        grid-template-columns: auto;
      {% elsif block.settings.mobile_columns == 'repeat-1' %}
        grid-template-columns: repeat(1, 1fr);
      {% elsif block.settings.mobile_columns == 'repeat-2' %}
        grid-template-columns: repeat(2, 1fr);
      {% elsif block.settings.mobile_columns == 'repeat-3' %}
        grid-template-columns: repeat(3, 1fr);
      {% endif %}
      
      column-gap: {{ block.settings.mobile_column_gap }}px;
      row-gap: {{ block.settings.mobile_row_gap }}px;
      padding: {{ block.settings.mobile_padding }}px;
    }
  }

  .ai-grid-container-{{ ai_gen_id }} > * {
    min-width: 0;
    min-height: 0;
  }
{% endstyle %}

<grid-container-{{ ai_gen_id }} class="ai-grid-container-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% for block in blocks %}
    {{ block }}
  {% endfor %}
</grid-container-{{ ai_gen_id }}>

<script>
  (function() {
    class GridContainer{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.style.display = 'block';
      }
    }

    customElements.define('grid-container-{{ ai_gen_id }}', GridContainer{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Grid container",
  "tag": null,
  "class": "grid-container-block",
  "settings": [
    {
      "type": "header",
      "content": "Desktop grid layout"
    },
    {
      "type": "select",
      "id": "grid_template_columns",
      "label": "Columns",
      "options": [
        {
          "value": "auto",
          "label": "Auto"
        },
        {
          "value": "repeat-2",
          "label": "2 columns"
        },
        {
          "value": "repeat-3",
          "label": "3 columns"
        },
        {
          "value": "repeat-4",
          "label": "4 columns"
        },
        {
          "value": "repeat-5",
          "label": "5 columns"
        },
        {
          "value": "repeat-6",
          "label": "6 columns"
        },
        {
          "value": "custom",
          "label": "Custom"
        }
      ],
      "default": "repeat-3"
    },
    {
      "type": "text",
      "id": "custom_columns",
      "label": "Custom columns value",
      "info": "Example: 1fr 2fr 1fr or 200px auto 1fr"
    },
    {
      "type": "select",
      "id": "grid_template_rows",
      "label": "Rows",
      "options": [
        {
          "value": "auto",
          "label": "Auto"
        },
        {
          "value": "repeat-2",
          "label": "2 rows"
        },
        {
          "value": "repeat-3",
          "label": "3 rows"
        },
        {
          "value": "repeat-4",
          "label": "4 rows"
        },
        {
          "value": "custom",
          "label": "Custom"
        }
      ],
      "default": "auto"
    },
    {
      "type": "text",
      "id": "custom_rows",
      "label": "Custom rows value",
      "info": "Example: 100px auto 200px"
    },
    {
      "type": "header",
      "content": "Tablet layout"
    },
    {
      "type": "select",
      "id": "tablet_columns",
      "label": "Columns on tablet",
      "options": [
        {
          "value": "auto",
          "label": "Auto"
        },
        {
          "value": "repeat-1",
          "label": "1 column"
        },
        {
          "value": "repeat-2",
          "label": "2 columns"
        },
        {
          "value": "repeat-3",
          "label": "3 columns"
        },
        {
          "value": "repeat-4",
          "label": "4 columns"
        }
      ],
      "default": "repeat-2"
    },
    {
      "type": "header",
      "content": "Mobile layout"
    },
    {
      "type": "select",
      "id": "mobile_columns",
      "label": "Columns on mobile",
      "options": [
        {
          "value": "auto",
          "label": "Auto"
        },
        {
          "value": "repeat-1",
          "label": "1 column"
        },
        {
          "value": "repeat-2",
          "label": "2 columns"
        },
        {
          "value": "repeat-3",
          "label": "3 columns"
        }
      ],
      "default": "repeat-1"
    },
    {
      "type": "header",
      "content": "Grid spacing"
    },
    {
      "type": "range",
      "id": "column_gap",
      "label": "Column gap",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 20
    },
    {
      "type": "range",
      "id": "row_gap",
      "label": "Row gap",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 20
    },
    {
      "type": "range",
      "id": "mobile_column_gap",
      "label": "Mobile column gap",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "default": 12
    },
    {
      "type": "range",
      "id": "mobile_row_gap",
      "label": "Mobile row gap",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "default": 12
    },
    {
      "type": "header",
      "content": "Grid alignment"
    },
    {
      "type": "select",
      "id": "justify_items",
      "label": "Horizontal alignment",
      "options": [
        {
          "value": "start",
          "label": "Start"
        },
        {
          "value": "end",
          "label": "End"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "stretch",
          "label": "Stretch"
        }
      ],
      "default": "stretch"
    },
    {
      "type": "select",
      "id": "align_items",
      "label": "Vertical alignment",
      "options": [
        {
          "value": "start",
          "label": "Start"
        },
        {
          "value": "end",
          "label": "End"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "stretch",
          "label": "Stretch"
        }
      ],
      "default": "stretch"
    },
    {
      "type": "select",
      "id": "grid_auto_flow",
      "label": "Grid flow direction",
      "options": [
        {
          "value": "row",
          "label": "Row"
        },
        {
          "value": "column",
          "label": "Column"
        },
        {
          "value": "dense",
          "label": "Dense"
        },
        {
          "value": "row dense",
          "label": "Row dense"
        },
        {
          "value": "column dense",
          "label": "Column dense"
        }
      ],
      "default": "row",
      "info": "Controls how auto-placed items flow into the grid"
    },
    {
      "type": "header",
      "content": "Container style"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_left",
      "label": "Padding left",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_right",
      "label": "Padding right",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "mobile_padding",
      "label": "Mobile padding",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "default": 0
    }
  ],
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "image"
    },
    {
      "type": "text"
    },
    {
      "type": "heading"
    },
    {
      "type": "button"
    },
    {
      "type": "video"
    }
  ],
  "presets": [
    {
      "name": "Grid container"
    }
  ]
}
{% endschema %}
