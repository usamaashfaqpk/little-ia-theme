{% comment %}
  Simple Quick Add
  - Adds first available variant to cart
  - No modal
  - No JS
{% endcomment %}

{% assign variant = product.selected_or_first_available_variant %}

{% if variant.available %}
  <button
    class="quick-add-simple"
    data-variant-id="{{ variant.id }}"
    aria-label="Add {{ product.title }} to cart"
  >
    <span class="quick-add-simple__icon">
      {{ 'icon-add-to-cart.svg' | inline_asset_content }}
    </span>
    <span class="quick-add-simple__text">Add</span>
  </button>
{% endif %}


<style>
  .product-image-slider {
    position: relative;
  }

  .simple-quick-add {
    position: absolute;
    bottom: 10px;
    right: 10px;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity 0.2s ease, transform 0.2s ease;
    transform: translateY(6px);
    z-index: 20;
  }

  .product-image-slider:hover .simple-quick-add {
    opacity: 1;
    visibility: visible;
    pointer-events: all;
    transform: translateY(0);
  }

  .simple-quick-add__button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 50%;
    width: 38px;
    height: 38px;
    cursor: pointer;
  }

  .simple-quick-add__button svg {
    width: 16px;
    height: 16px;
  }
</style>

<script>
  document.addEventListener('click', async (e) => {
  const btn = e.target.closest('.simple-quick-add');
  if (!btn) return;

  e.preventDefault();

  const variantId = btn.dataset.variantId;

  await fetch('/cart/add.js', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      id: variantId,
      quantity: 1
    })
  });

  btn.classList.add('added');
});
</script>
